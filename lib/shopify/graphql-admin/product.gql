mutation AddProduct($input: ProductCreateInput!) {
	productCreate(product: $input) {
		product {
			...ProductFragment
		}
		userErrors {
			field
			message
		}
	}
}

mutation ProductCreateMedia($media: [CreateMediaInput!]!, $productId: ID!) {
	productCreateMedia(media: $media, productId: $productId) {
		media {
			alt
			mediaContentType
			status
		}
		mediaUserErrors {
			field
			message
		}
		product {
			...ProductFragment
		}
	}
}

mutation ProductUpdate($product: ProductUpdateInput!, $media: [CreateMediaInput!]) {
	productUpdate(product: $product, media: $media) {
		product {
			...ProductFragment
			media(first: 10) {
				nodes {
					alt
					mediaContentType
					preview {
						status
					}
				}
			}
		}
		userErrors {
			field
			message
		}
	}
}

mutation ProductDelete($id: ID!) {
	productDelete(input: { id: $id }) {
		deletedProductId
		userErrors {
			field
			message
		}
	}
}

fragment ProductFragment on Product {
	id
	handle
	title
	description
	featuredImage {
		id
		url
		height
		width
		altText
	}

	options {
		id
		name
	}
	tags

	variants(first: 100) {
		edges {
			node {
				id
				title
				availableForSale
				sku
				selectedOptions {
					name
					value
				}
				image {
					id
					url(transform: { maxWidth: 400, maxHeight: 400, crop: CENTER })
					height
					width
					altText
				}
				price
				unitPrice {
					amount
					currencyCode
				}
			}
		}
	}
}

fragment ProductVariantFragment on ProductVariant {
	id
	title
	availableForSale
	selectedOptions {
		name
		value
	}
}
